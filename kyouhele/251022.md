**닉네임**: kyouhele

**문제 플랫폼**: 프로그래머스

**문제 이름 또는 번호**: 리코쳇로봇

**문제 링크**: https://school.programmers.co.kr/learn/courses/30/lessons/169199

**오늘의 메모(선택)**: 그냥 BFS인데 mini cub2d 만들어버리기 _ 실패해버렸다
 
**코드(선택)**:

```c
#include <stdio.h>
#include <stdbool.h>
#include <stdlib.h>
#include <string.h>


typedef struct{
    int x, y;
    int moves;
} Node;

int up(char* board[], int *_x, int *_y);
int down(char* board[], int *_x, int *_y);
int left(char* board[], int *_x, int *_y);
int right(char* board[], int *_x, int *_y);
void getpos(char **board, int *_x, int *_y);
int do_bfs(char** board, int board_len);


int solution(const char* _board[], size_t board_len) {
    char **board = calloc(board_len+1,sizeof(char*));
    board[board_len] = 0;
    for (int i = 0; i < board_len; i++)
    {
        board[i] = calloc(strlen(_board[i])+1, sizeof(char));
        for (int j = 0; j < strlen(_board[i]); j++)
            board[i][j] = _board[i][j];
    }
    int cnt = do_bfs(board,board_len);
    return cnt;
}

int do_bfs(char *board[], int board_len)
{
    int x, y, size = board_len;
    getpos(board, &x, &y);
    
    Node *queue = calloc(size * strlen(board[0]) * 100, sizeof(Node));
    int front = 0, rear = 0;
    queue[rear++] = (Node){x, y, 0};

    while (front < rear)
    {
        Node cur = queue[front++];
        int x = cur.x, y = cur.y;

        // 네 방향 시도
        int dirs[4][2] = {{-1,0},{1,0},{0,-1},{0,1}};
        for (int d = 0; d < 4; d++)
        {
            int nx = x, ny = y, res = 0;

            if (d == 0) res = up(board, &nx, &ny);
            if (d == 1) res = down(board, &nx, &ny);
            if (d == 2) res = left(board, &nx, &ny);
            if (d == 3) res = right(board, &nx, &ny);

            if (res == -1) return cur.moves + 1;
            if (res == 0) return -1;
            if (res > 0)
                queue[rear++] = (Node){nx, ny, cur.moves + 1};
        }
    }
}

void getpos(char **board, int *x, int *y)
{
    for (int i = 0; board[i]; i++)
    {
        for (int j = 0; board[i][j]; j++)
        {
            if (board[i][j] == 'R')
            {
                *x = i;
                *y = j;
                return;
            }
        }
    }
    *x = -1;
    *y = -1;
}

int left(char* board[], int *_x, int *_y)
{
    int x = *_x, y = *_y,cnt = 0;
    if (y-1 < 0)    return 0;
    while (y-1 >= 0 && board[x][y - 1] == '.')
    {
        board[x][y - 1] = 'R';
        board[x][y] = 'V';
        y--;
        *_y = y;
        cnt++;
    }
    if (board[x][y-1] == 'G') return -1;
    return cnt;
}

int right(char* board[], int *_x, int *_y)
{
    int x = *_x, y = *_y, cnt = 0;
    if (y + 1 > strlen(board[0]))    return 0;
    while (y + 1 < strlen(board[0]) && board[x][y + 1] == '.')
    {
        board[x][y + 1] = 'R';
        board[x][y] = 'V';
        y++;
        *_y = y;
        cnt++;
    }
    if (board[x ][y+1] == 'G') return -1;

    return cnt;   
}
int up(char* board[], int *_x, int *_y)
{
    int x = *_x, y = *_y, cnt= 0;
    if (x-1 < 0)    return 0;
    while (x-1 >= 0 && board[x - 1][y] == '.')
    {
        board[x - 1][y] = 'R';
        board[x][y] = 'V';
        x--;
        *_x = x;
        cnt++;
    }
    if (board[x - 1][y] == 'G') return -1;
    return cnt;
}

int down(char* board[], int *_x, int *_y)
{
    int x = *_x, y = *_y,cnt=0;
    int size = 0;
    while (board[size])
        size++;
    if (x+1 >= size)    return 0;
    while(x+1 < size && board[x + 1][y] == '.')
    {
        board[x + 1][y] = 'R';
        board[x][y] = 'V';
        x++;
        *_x = x;
        cnt++;
    }
    if (board[x+1][y] == 'G') return -1;
    return cnt;
}
```
